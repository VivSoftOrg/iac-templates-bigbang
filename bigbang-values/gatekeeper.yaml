# -- Toggle deployment of OPA Gatekeeper.
enabled: true
git:
  repo: "https://gitlab.com/enbuild-staging/charts/policy.git"
  path: "./chart"
  tag: "3.9.0-bb.0"
# -- Flux reconciliation overrides specifically for the OPA Gatekeeper Package
flux:
  install:
    crds: CreateReplace
  upgrade:
    crds: CreateReplace
# -- Values to passthrough to the gatekeeper chart: https://gitlab.com/enbuild-staging/charts/policy.git
values:
  postUpgrade:
    labelNamespace:
      image:
        repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-kubernetes/kubectl
  postInstall:
    labelNamespace:
      image:
        repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-kubernetes/kubectl
    probeWebhook:
      image:
        repository: registry.gitlab.com/enbuild-staging/container_registry/big-bang-base
  preUninstall:
    deleteWebhookConfigurations:
      image:
        repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-kubernetes/kubectl
  image:
    repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-openpolicyagent/gatekeeper
    crdRepository: registry.gitlab.com/enbuild-staging/container_registry/opensource-kubernetes/kubectl
  violations:
    allowedDockerRegistries:
      enabled: true
      enforcementAction: deny
      kind: K8sAllowedRepos
      name: allowed-docker-registries
      match: {}
      parameters:
        repos:
          - registry.gitlab.com
        excludedResources: []
  bbtests:
    scripts:
      image: registry.gitlab.com/enbuild-staging/container_registry/opensource-kubernetes/kubectl:v1.22.2
# -- Post Renderers.  See docs/postrenders.md
postRenderers: []
