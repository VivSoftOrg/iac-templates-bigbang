---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: bigbang
spec:
  chart:
    spec:
      chart: chart
      sourceRef:
        kind: GitRepository
        name: bigbang
        namespace: bigbang
  interval: 2m0s
  values:
    istio:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/istio-controlplane.git
      values:
        hub: registry.gitlab.com/enbuild-staging/container_registry/opensource-istio
        cni:
          image:
            hub: registry.gitlab.com/enbuild-staging/container_registry/opensource-istio
    istiooperator:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/istio-operator.git
      values:
        hub: registry.gitlab.com/enbuild-staging/container_registry/opensource-istio
    jaeger:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/jaeger.git
      values:
        image:
          repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-jaegertracing/jaeger-operator
        retention:
          image: registry.gitlab.com/enbuild-staging/container_registry/opensource-jaegertracing/jaeger-es-index-cleaner:1.24.0
        jaeger:
          spec:
            allInOne:
              image: registry.gitlab.com/enbuild-staging/container_registry/opensource-jaegertracing/all-in-one:1.24.0
            agent:
              image: registry.gitlab.com/enbuild-staging/container_registry/opensource-jaegertracing/jaeger-agent:1.24.0
            ingestor:
              image: registry.gitlab.com/enbuild-staging/container_registry/opensource-jaegertracing/jaeger-ingestor:1.24.0
            query:
              image: registry.gitlab.com/enbuild-staging/container_registry/opensource-jaegertracing/jaeger-query:1.24.0
            collector:
              image: registry.gitlab.com/enbuild-staging/container_registry/opensource-jaegertracing/jaeger-collector:1.24.0
    kiali:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/kiali.git
      values:
        image:
          repo: registry.gitlab.com/enbuild-staging/container_registry/opensource-kiali/kiali-operator
        cr:
          spec:
            deployment:
              image_name: registry.gitlab.com/enbuild-staging/container_registry/opensource-kiali/kiali
        svcPatchJob:
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-kubernetes-1.21/kubectl
    clusterAuditor:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/cluster-auditor.git
      values:
        image:
          repo: registry.gitlab.com/enbuild-staging/container_registry/cluster-auditor/opa-collector
    gatekeeper:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/gatekeeper.git
      values:
        image:
          repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-openpolicyagent/gatekeeper
        violations:
          allowedDockerRegistries:
            enabled: true
            enforcementAction: deny
            kind: K8sAllowedRepos
            name: allowed-docker-registries
            match: {}
            parameters:
              repos:
                - registry.gitlab.com
              excludedResources: []
    logging:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/elasticsearch-kibana.git
      values:
        kibana:
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/elastic-kibana/kibana
        elasticsearch:
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/elastic-elasticsearch/elasticsearch
        upgradeJob:
            image:
              repository: registry.gitlab.com/enbuild-staging/container_registry/gitlab-gitlab/kubectl
    eckoperator:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/eck-operator.git
      values:
        image:
          repository: registry.gitlab.com/enbuild-staging/container_registry/elastic-eck-operator/eck-operator
    fluentbit:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/fluentbit.git
      values:
        image:
          repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-fluent/fluent-bit
    monitoring:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/monitoring.git
      values:
        alertmanager:
          alertmanagerSpec:
            image:
              repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-prometheus/alertmanager
        grafana:
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-grafana/grafana
          testFramework:
            image: registry.gitlab.com/enbuild-staging/container_registry/opensource-bats/bats
          sidecar:
            image:
              repository: registry.gitlab.com/enbuild-staging/container_registry/kiwigrid/k8s-sidecar
        kube-state-metrics:
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-coreos/kube-state-metrics
        prometheus-node-exporter:
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-prometheus/node-exporter
        prometheusOperator:
          admissionWebhooks:
            patch:
              image:
                repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-jet/kube-webhook-certgen
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-prometheus-operator/prometheus-operator
          configmapReloadImage:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-jimmidyson/configmap-reload
          prometheusConfigReloaderImage:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-prometheus-operator/prometheus-config-reloader
          kubectlImage:
            repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-kubernetes-1.19/kubectl-1.19
        prometheus:
          prometheusSpec:
            image:
              repository: registry.gitlab.com/enbuild-staging/container_registry/opensource-prometheus/prometheus
    twistlock:
      git:
        repo: https://gitlab.com/enbuild-staging/charts/twistlock.git
      values:
        console:
          image:
            repository: registry.gitlab.com/enbuild-staging/container_registry/twistlock-console/console
